# Dockify App - Environment Variables Template
# Copy this file to .env.local and fill in your actual values

# ===================================
# Kubernetes Cluster Configuration
# ===================================

# Get your node IP with:
# kubectl get nodes -o jsonpath='{.items[0].status.addresses[?(@.type=="InternalIP")].address}'
NODE_IP=your-node-ip-here

# ===================================
# PostgreSQL Configuration (Direct)
# ===================================

# Direct PostgreSQL connection (not recommended for production)
POSTGRES_HOST=${NODE_IP}
POSTGRES_PORT=30432
POSTGRES_DB=dockify
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your-postgres-password-here

# Direct connection string
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# ===================================
# PgBouncer Configuration (RECOMMENDED)
# ===================================

# Use PgBouncer for connection pooling (recommended for applications)
PGBOUNCER_HOST=${NODE_IP}
PGBOUNCER_PORT=30632
PGBOUNCER_DB=dockify
PGBOUNCER_USER=postgres
PGBOUNCER_PASSWORD=your-postgres-password-here

# PgBouncer connection string (RECOMMENDED for Next.js)
DATABASE_URL_POOLED=postgresql://${PGBOUNCER_USER}:${PGBOUNCER_PASSWORD}@${PGBOUNCER_HOST}:${PGBOUNCER_PORT}/${PGBOUNCER_DB}

# ===================================
# Redis Configuration
# ===================================

REDIS_HOST=${NODE_IP}
REDIS_PORT=30379
# REDIS_PASSWORD=  # Uncomment if you enable Redis password

# Redis connection string
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}

# ===================================
# Next.js Specific
# ===================================

# Prisma uses DATABASE_URL by default
# For PgBouncer, use DATABASE_URL_POOLED
DATABASE_URL=${DATABASE_URL_POOLED}

# Redis for session store or caching
REDIS_SESSION_URL=${REDIS_URL}

# ===================================
# Internal Cluster Access (from within Kubernetes)
# ===================================

# PostgreSQL internal service
# POSTGRES_HOST_INTERNAL=postgresql-service.dockify-app.svc.cluster.local
# POSTGRES_PORT_INTERNAL=5432

# PgBouncer internal service (RECOMMENDED)
# PGBOUNCER_HOST_INTERNAL=pgbouncer-service.dockify-app.svc.cluster.local
# PGBOUNCER_PORT_INTERNAL=6432

# Redis internal service
# REDIS_HOST_INTERNAL=redis-service.dockify-app.svc.cluster.local
# REDIS_PORT_INTERNAL=6379
